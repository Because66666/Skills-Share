---
name: 时间序列ARIMA预测模型
description: 基于自回归积分滑动平均（ARIMA）模型的单变量时间序列预测工具，支持自动参数调优与手动参数配置，适用于销量、库存、经济指标等短期至中期趋势预测。
author: 数学建模专家
version: 1.0
trigger: 当用户需要对单变量时间序列数据进行预测时触发，场景包括但不限于月度销量预测、季度经济指标预测、库存需求预测等。
output_format: 包含预测值序列、95%置信区间、模型训练评估指标（MAE、RMSE）的结构化字典结果。
---

## 工作流程
1. **数据准备**：加载单变量时间序列数据，确保数据为带datetime类型索引的Pandas Series或DataFrame，处理缺失值（插值/删除）与异常值。
2. **平稳性处理**：通过ADF检验判断序列平稳性，若不平稳则进行差分操作确定d值。
3. **参数选择**：
   - 手动模式：通过ACF/PACF图分析确定AR阶数p和MA阶数q；
   - 自动模式：使用AutoARIMA算法自动搜索最优p、d、q组合。
4. **模型训练**：利用选定参数训练ARIMA模型，完成参数估计与残差检验。
5. **模型评估**：计算训练集的MAE、RMSE指标，验证残差是否为白噪声。
6. **预测输出**：生成指定未来步数的预测值及置信区间，支持可视化展示。

## 约束条件
1. 仅支持单变量时间序列数据，输入需包含连续的时间索引（如日、月、季度）。
2. 模型适用于短期至中期预测，建议预测步数不超过原始序列长度的20%。
3. 若序列存在明显季节性趋势，建议使用SARIMA模型替代本工具。
4. 输入数据缺失值占比需低于5%，否则需先完成缺失值处理。

## 工具使用
本技能的ARIMA模型实现代码位于`scripts/model.py`，提供`ARIMAPredictor`类，核心功能如下：
- `__init__`：初始化模型，支持手动设置p、d、q参数或启用自动调优模式；
- `fit`：输入时间序列数据完成模型训练，自动完成数据校验与参数优化（若开启自动调优）；
- `forecast`：生成未来指定步数的预测结果，返回预测值、置信区间及评估指标；
- `plot_forecast`：可视化原始序列与预测结果，包含置信区间阴影。