---
name: 分类变量独立性检验
description: 用于检验两个分类变量之间是否存在统计独立性的假设检验方法，通过卡方检验实现，可应用于如性别与消费偏好、地区与疾病发病率等场景的相关性分析。
author: Doubao-1.8
version: 1.0
trigger: 当需要分析两个分类变量是否存在关联时触发，例如判断不同群体的行为特征是否存在差异、分类变量间是否具有统计依赖性等。
output_format: 包含卡方统计量、p值、自由度、期望频数及检验结论的结构化结果（如JSON格式）。
---

## 工作流程
1. **提出假设**：原假设H₀为两个分类变量相互独立；备择假设H₁为两个分类变量不独立（存在关联）。
2. **构建列联表**：整理两个分类变量的观测频数，形成二维列联表。
3. **计算期望频数**：每个单元格的期望频数计算公式为：$E_{ij} = \frac{行合计_i \times 列合计_j}{总样本量}$。
4. **计算卡方统计量**：根据观测频数与期望频数的差异计算卡方统计量：$\chi^2 = \sum \frac{(O_{ij} - E_{ij})^2}{E_{ij}}$，其中$O_{ij}$为观测频数，$E_{ij}$为期望频数。
5. **确定自由度**：自由度$df = (行数-1) \times (列数-1)$。
6. **作出决策**：比较卡方统计量与临界值，或通过p值判断是否拒绝原假设（通常以p<0.05为显著性水平）。

## 约束条件
1. 样本量需满足列联表中大部分单元格的期望频数不小于5；若存在多个单元格期望频数小于5，建议使用Fisher精确检验等替代方法。
2. 数据必须为分类变量，且观测值为频数数据。
3. 所有观测值之间相互独立，无重复测量或配对关系。

## 工具使用
本方法的Python实现位于`scripts/model.py`，提供了`categorical_independence_test`函数，可直接传入列联表数据（支持二维列表或Pandas DataFrame格式），返回包含检验结果的结构化数据。