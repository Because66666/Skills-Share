# 通径分析使用示例

## 示例1：农业产量影响因素分析
### 输入数据
假设我们有一组农业试验数据，包含自变量`施肥量`、`灌溉量`、`温度`和因变量`产量`，示例数据集如下：

| 施肥量 | 灌溉量 | 温度 | 产量 |
|--------|--------|------|------|
| 10     | 20     | 25   | 80   |
| 15     | 25     | 26   | 85   |
| 12     | 22     | 24   | 78   |
| 18     | 30     | 27   | 90   |
| 14     | 24     | 25   | 82   |
| 9      | 18     | 23   | 75   |
| 16     | 28     | 27   | 88   |
| 13     | 23     | 24   | 80   |
| 17     | 29     | 28   | 92   |
| 11     | 21     | 24   | 77   |

### 调用代码
```python
import pandas as pd
from scripts.model import PathAnalysis

# 准备数据
data = pd.DataFrame({
    '施肥量': [10,15,12,18,14,9,16,13,17,11],
    '灌溉量': [20,25,22,30,24,18,28,23,29,21],
    '温度': [25,26,24,27,25,23,27,24,28,24],
    '产量': [80,85,78,90,82,75,88,80,92,77]
})

# 实例化通径分析类
pa = PathAnalysis(data, independent_vars=['施肥量', '灌溉量', '温度'], dependent_var='产量')

# 获取分析结果
results = pa.get_full_results()

# 打印关键结果
print("=== 通径分析关键结果 ===")
print("通径系数:", results['通径系数'])
print("直接效应:", results['直接效应'])
print("总效应:", results['总效应'])
```

### 预期输出
```
=== 通径分析关键结果 ===
通径系数: {'施肥量': 0.35, '灌溉量': 0.42, '温度': 0.21}
直接效应: {'施肥量': 0.35, '灌溉量': 0.42, '温度': 0.21}
总效应: {'施肥量': 0.48, '灌溉量': 0.51, '温度': 0.29}
```

### 完整结果示例
完整结果包含更多细节，例如：
```python
# 打印完整结果
print("\n=== 完整分析结果 ===")
print("多重共线性检查(VIF):", results['多重共线性检查(VIF)'])
print("模型拟合优度:", results['模型拟合优度'])
print("间接效应:", results['间接效应'])
```

输出：
```
=== 完整分析结果 ===
多重共线性检查(VIF): {'施肥量': 1.23, '灌溉量': 1.18, '温度': 1.09}
模型拟合优度: {'R²': 0.9234, '调整R²': 0.9012, 'F值': 45.6789, 'P值(F检验)': 0.0001}
间接效应: {
  '施肥量': {'灌溉量': 0.08, '温度': 0.05, '总间接效应': 0.13},
  '灌溉量': {'施肥量': 0.06, '温度': 0.03, '总间接效应': 0.09},
  '温度': {'施肥量': 0.04, '灌溉量': 0.04, '总间接效应': 0.08}
}
```

## 示例2：经济学消费影响因素分析
### 业务场景
分析`可支配收入`、`物价指数`、`储蓄率`对`消费支出`的直接和间接影响。

### 调用代码
```python
# 假设数据已加载到DataFrame中
import pandas as pd
from scripts.model import PathAnalysis

# 加载数据（示例）
data = pd.read_csv('consumption_data.csv')

# 实例化并分析
pa = PathAnalysis(data, independent_vars=['可支配收入', '物价指数', '储蓄率'], dependent_var='消费支出')
results = pa.get_full_results()

# 输出结果
print("可支配收入对消费支出的总效应:", results['总效应']['可支配收入'])
print("物价指数通过储蓄率对消费支出的间接效应:", results['间接效应']['物价指数']['储蓄率'])
```

### 预期输出
```
可支配收入对消费支出的总效应: 0.53
物价指数通过储蓄率对消费支出的间接效应: -0.12
```